plugins {
  id "com.moowork.node" version "1.2.0"

  // orchestrating docker builds and pushes
  id "com.palantir.docker" version "0.19.2"
}

apply plugin: "idea"

version = "0.1.0"

node {
  // Version of node to use.
  version = "9.8.0"

  // If true, it will download node using above parameters.
  // If false, it will try to use globally installed node.
  download = true
}

def NPM_GROUP = "npm"

task build(type: NpmTask, dependsOn: ':npmInstall') {
  group = NPM_GROUP
  args = ["run", "build"]
}

task start(type: NpmTask, dependsOn: ':npmInstall') {
  group = NPM_GROUP
  args = ["run", "start"]
}

docker {
  name "zoubair/${project.name}:${project.version}"
  files "dist", "nginx-custom.conf"
}
